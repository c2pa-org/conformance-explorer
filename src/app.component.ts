import { ChangeDetectionStrategy, Component, signal, effect, inject, PLATFORM_ID } from '@angular/core';
import { isPlatformBrowser, DOCUMENT, CommonModule } from '@angular/common';
import { ProductListComponent } from './product-list.component';
import { TrustListComponent } from './trust-list.component';
import { TsaTrustListComponent } from './tsa-trust-list.component';

@Component({
  selector: 'app-root',
  standalone: true,
  template: `<main class="container mx-auto p-4 md:p-8 relative">
  <header class="mb-8">
    <div class="flex items-center justify-between gap-4 mb-2 text-slate-800 dark:text-slate-100">
        <div class="flex items-center gap-4">
            <svg width="68" height="54" viewBox="0 0 68 54" class="h-10 sm:h-14 w-auto fill-current">
                <g class="illustration">
                    <ellipse cx="24.2177419" cy="14.85" rx="1.59677419" ry="1.62"></ellipse>
                    <path
                        d="M16.5266129,17.523 C14.4774194,17.523 12.8008065,15.822 12.8008065,13.743 C12.8008065,11.664 14.4774194,9.963 16.5266129,9.963 C18.5758065,9.963 20.2524194,11.664 20.2524194,13.743 C20.2524194,15.822 18.5758065,17.523 16.5266129,17.523 Z M16.5266129,12.15 C15.6483871,12.15 14.9564516,12.879 14.9564516,13.743 C14.9564516,14.607 15.675,15.336 16.5266129,15.336 C17.3782258,15.336 18.0967742,14.607 18.0967742,13.743 C18.0967742,12.879 17.3782258,12.15 16.5266129,12.15 Z">
                    </path>
                    <path
                        d="M16.5266129,53.919 C7.53145161,53.919 0.212903226,46.494 0.212903226,37.368 L0.212903226,21.708 C0.212903226,21.303 0.425806452,20.952 0.771774194,20.763 C1.11774194,20.574 1.54354839,20.601 1.86290323,20.817 C5.58870968,23.274 10.9112903,24.705 16.5,24.705 C21.9024194,24.705 27.3846774,23.247 31.1637097,20.817 C31.4830645,20.601 31.908871,20.601 32.2548387,20.79 C32.6008065,20.979 32.8137097,21.357 32.8137097,21.735 L32.8137097,37.395 C32.8137097,46.494 25.4951613,53.919 16.5266129,53.919 Z M2.34193548,23.625 L2.34193548,37.395 C2.34193548,45.306 8.70241935,51.759 16.5,51.759 C24.2975806,51.759 30.6580645,45.306 30.6580645,37.395 L30.6580645,23.625 C26.6927419,25.704 21.6362903,26.892 16.5,26.892 C11.3104839,26.865 6.25403226,25.704 2.34193548,23.625 Z">
                    </path>
                    <path
                        d="M16.5266129,21.951 C11.0975806,21.951 5.90806452,20.709 1.91612903,18.414 C0.798387097,17.793 0.159677419,16.551 0.266129032,15.282 C0.612096774,11.178 2.475,7.371 5.48225806,4.563 C8.51612903,1.728 12.4282258,0.189 16.5266129,0.189 C20.625,0.189 24.5637097,1.755 27.5709677,4.563 C30.5782258,7.371 32.4145161,11.178 32.7870968,15.282 L32.7870968,15.282 C32.8935484,16.551 32.2548387,17.793 31.1370968,18.414 C27.1185484,20.682 21.9290323,21.951 16.5266129,21.951 Z M16.5266129,2.376 C9.26129032,2.376 3.06048387,8.127 2.39516129,15.471 C2.36854839,15.903 2.58145161,16.308 2.95403226,16.524 C6.65322581,18.63 11.4701613,19.764 16.5266129,19.764 C21.5830645,19.764 26.4,18.603 30.0991935,16.524 C30.4717742,16.308 30.6846774,15.903 30.6580645,15.471 L30.6580645,15.471 C29.9927419,8.127 23.7919355,2.376 16.5266129,2.376 Z">
                    </path>
                    <path
                        d="M13.8653226,14.769 C13.8387097,14.769 13.8120968,14.769 13.7854839,14.769 C9.66048387,14.445 5.775,13.392 2.58145161,11.718 C2.04919355,11.448 1.83629032,10.773 2.12903226,10.26 C2.39516129,9.72 3.06048387,9.504 3.56612903,9.801 C6.52016129,11.34 10.1129032,12.312 13.9451613,12.609 C14.5306452,12.663 14.9830645,13.176 14.9298387,13.77 C14.9032258,14.337 14.4241935,14.769 13.8653226,14.769 Z">
                    </path>
                    <path
                        d="M16.5266129,37.935 C10.5387097,37.935 4.79032258,36.396 0.74516129,33.723 C0.239516129,33.399 0.106451613,32.724 0.425806452,32.211 C0.74516129,31.698 1.41048387,31.563 1.91612903,31.887 C5.64193548,34.344 10.9645161,35.748 16.5266129,35.748 C22.0887097,35.748 27.4379032,34.344 31.1370968,31.887 C31.6427419,31.563 32.3080645,31.698 32.6274194,32.211 C32.9467742,32.724 32.8137097,33.399 32.3080645,33.723 C28.2362903,36.396 22.4879032,37.935 16.5266129,37.935 Z">
                    </path>
                    <path
                        d="M16.5266129,42.822 C10.5653226,42.822 4.84354839,41.283 0.771774194,38.637 C0.266129032,38.313 0.133064516,37.638 0.452419355,37.125 C0.771774194,36.612 1.43709677,36.477 1.94274194,36.801 C5.66854839,39.231 10.9645161,40.635 16.5266129,40.635 C22.0887097,40.635 27.3846774,39.231 31.1104839,36.801 C31.616129,36.477 32.2814516,36.612 32.6008065,37.125 C32.9201613,37.638 32.7870968,38.313 32.2814516,38.637 C28.2096774,41.31 22.4612903,42.822 16.5266129,42.822 Z">
                    </path>
                </g>
                <g class="text" transform="translate(41.000000, 11.000000)">
                    <path
                        d="M3.3815534,15.5039063 C4.14174757,15.8867187 5.0592233,16.078125 6.10776699,16.078125 C7.15631068,16.078125 8.07378641,15.8867188 8.7815534,15.5039063 C9.48932039,15.1210938 10.092233,14.65625 10.5378641,14.1367188 C10.9834951,13.6171875 11.2980583,13.0429688 11.507767,12.4960938 C11.7174757,11.9492188 11.7961165,11.4570312 11.7961165,11.1015625 C11.7961165,10.9921875 11.7436893,10.9375 11.638835,10.9375 L9.8038835,10.9375 C9.69902913,10.9375 9.62038835,10.9921875 9.59417476,11.1015625 C9.51553398,11.375 9.41067961,11.703125 9.25339806,12.0585937 C9.1223301,12.4140625 8.91262136,12.7421875 8.65048544,13.0429688 C8.38834951,13.34375 8.04757282,13.5898438 7.65436893,13.8085938 C7.26116505,14.0273438 6.7368932,14.109375 6.13398058,14.109375 C4.90194175,14.109375 3.95825243,13.5898438 3.30291262,12.5234375 C2.64757282,11.4570313 2.30679612,9.98046875 2.30679612,8.12109375 C2.30679612,6.234375 2.64757282,4.7578125 3.30291262,3.71875 C3.95825243,2.6796875 4.90194175,2.1328125 6.13398058,2.1328125 C6.7631068,2.1328125 7.28737864,2.2421875 7.68058252,2.4609375 C8.07378641,2.6796875 8.41456311,2.953125 8.67669903,3.28125 C8.93883495,3.58203125 9.1223301,3.9375 9.25339806,4.265625 C9.38446602,4.62109375 9.48932039,4.89453125 9.56796117,5.140625 C9.59417476,5.25 9.67281553,5.3046875 9.7776699,5.3046875 L11.6126214,5.3046875 C11.7174757,5.3046875 11.7699029,5.25 11.7699029,5.11328125 C11.7699029,4.8125 11.6912621,4.375 11.507767,3.80078125 C11.3242718,3.25390625 11.0097087,2.6796875 10.5902913,2.16015625 C10.1446602,1.61328125 9.56796117,1.1484375 8.83398058,0.73828125 C8.1,0.328125 7.18252427,0.13671875 6.0815534,0.13671875 C5.03300971,0.13671875 4.11553398,0.328125 3.35533981,0.73828125 C2.59514563,1.1484375 1.96601942,1.6953125 1.46796117,2.40625 C0.969902913,3.1171875 0.602912621,3.96484375 0.366990291,4.921875 C0.131067961,5.87890625 0.0262135922,6.97265625 0.0262135922,8.12109375 C0.0262135922,9.296875 0.131067961,10.3632812 0.366990291,11.3476563 C0.602912621,12.3320313 0.969902913,13.1796875 1.46796117,13.8632813 C1.96601942,14.546875 2.62135922,15.1210938 3.3815534,15.5039063 Z">
                    </path>
                    <path
                        d="M15.1776699,15.859375 L25.138835,15.859375 C25.2436893,15.859375 25.3223301,15.8046875 25.3223301,15.6953125 L25.3223301,14.0546875 C25.3223301,13.9453125 25.2699029,13.890625 25.138835,13.890625 L18.061165,13.890625 C18.0087379,13.890625 18.0087379,13.890625 18.0087379,13.890625 C18.0087379,13.8632812 18.0087379,13.8632812 18.0087379,13.8359375 L22.8582524,9.40625 C23.0417476,9.21484375 23.2776699,8.96875 23.5660194,8.6953125 C23.8543689,8.421875 24.1165049,8.06640625 24.3786408,7.68359375 C24.6407767,7.30078125 24.8504854,6.86328125 25.0339806,6.3984375 C25.2174757,5.93359375 25.3223301,5.4140625 25.3223301,4.83984375 C25.3223301,4.2109375 25.2174757,3.609375 24.9815534,3.03515625 C24.7456311,2.4609375 24.4048544,1.96875 23.9854369,1.53125 C23.5660194,1.12109375 23.015534,0.765625 22.3864078,0.51953125 C21.7572816,0.2734375 21.023301,0.13671875 20.2368932,0.13671875 C19.5291262,0.13671875 18.8737864,0.24609375 18.2708738,0.46484375 C17.6679612,0.68359375 17.1436893,0.984375 16.6980583,1.39453125 C16.2524272,1.77734375 15.9116505,2.26953125 15.6495146,2.81640625 C15.4135922,3.36328125 15.2825243,3.9921875 15.2825243,4.6484375 C15.2825243,4.7578125 15.3349515,4.8125 15.4660194,4.8125 L17.3271845,4.8125 C17.4320388,4.8125 17.5106796,4.7578125 17.5106796,4.6484375 C17.5106796,4.3203125 17.5631068,4.01953125 17.6941748,3.71875 C17.8252427,3.41796875 18.0087379,3.14453125 18.2446602,2.92578125 C18.4805825,2.6796875 18.768932,2.515625 19.1097087,2.3515625 C19.4504854,2.21484375 19.8174757,2.1328125 20.2368932,2.1328125 C20.7349515,2.1328125 21.1805825,2.21484375 21.5213592,2.40625 C21.8883495,2.5703125 22.176699,2.81640625 22.4126214,3.08984375 C22.6485437,3.36328125 22.8058252,3.6640625 22.9368932,3.96484375 C23.0417476,4.29296875 23.1203883,4.56640625 23.1203883,4.83984375 C23.1203883,5.16796875 23.0417476,5.49609375 22.9106796,5.796875 C22.7796117,6.125 22.5961165,6.42578125 22.3864078,6.69921875 C22.176699,6.97265625 21.9669903,7.21875 21.7572816,7.41015625 L15.1514563,13.8085937 C15.0990291,13.8359375 15.0728155,13.9179687 15.0728155,13.9726562 C15.0466019,14.0546875 15.0466019,14.0820312 15.0466019,14.1367188 L15.0466019,15.6679688 C14.9941748,15.8046875 15.0728155,15.859375 15.1776699,15.859375 Z">
                    </path>
                    <path
                        d="M10.6951456,20.5898438 C10.3019417,20.1523437 9.83009709,19.8242187 9.30582524,19.578125 C8.7815534,19.3320313 8.23106796,19.2226562 7.65436893,19.2226562 L1.73009709,19.2226562 C1.62524272,19.2226562 1.54660194,19.2773437 1.54660194,19.4140625 L1.54660194,34.5898437 C1.54660194,34.6992187 1.59902913,34.78125 1.73009709,34.78125 L3.51262136,34.78125 C3.61747573,34.78125 3.6961165,34.7265625 3.6961165,34.5898437 L3.6961165,28.6835937 C3.6961165,28.65625 3.6961165,28.6289062 3.7223301,28.6289062 L7.65436893,28.6289062 C8.23106796,28.6289062 8.7815534,28.5195312 9.30582524,28.2734375 C9.83009709,28.0273437 10.3019417,27.6992187 10.6951456,27.2890625 C11.0883495,26.8789062 11.4029126,26.359375 11.638835,25.8125 C11.8747573,25.265625 11.9796117,24.6367187 11.9796117,23.9804687 C11.9796117,23.3242188 11.8485437,22.6953125 11.638835,22.1210937 C11.4029126,21.5195312 11.0883495,21 10.6951456,20.5898438 Z M9.85631068,23.953125 C9.85631068,24.3085938 9.7776699,24.6640625 9.64660194,24.9921875 C9.51553398,25.3203125 9.33203883,25.59375 9.0961165,25.8398438 C8.86019417,26.0859375 8.59805825,26.2773438 8.30970874,26.4140625 C8.02135922,26.5507813 7.70679612,26.6328125 7.39223301,26.6328125 L3.7223301,26.6328125 C3.6961165,26.6328125 3.6961165,26.6328125 3.6961165,26.6054688 L3.6961165,21.2734375 C3.6961165,21.2460938 3.6961165,21.2460938 3.7223301,21.2460938 L7.39223301,21.2460938 C7.70679612,21.2460938 8.02135922,21.328125 8.30970874,21.4648438 C8.59805825,21.6015625 8.86019417,21.8203125 9.0961165,22.0664063 C9.33203883,22.3125 9.51553398,22.6132813 9.64660194,22.9414063 C9.7776699,23.2148437 9.85631068,23.5703125 9.85631068,23.953125 Z">
                    </path>
                    <path
                        d="M26.7902913,34.5078125 L21.9145631,19.3320313 C21.8621359,19.1953125 21.7834951,19.1679688 21.731068,19.1679688 L19.1359223,19.1679688 C19.0834951,19.1679688 19.0048544,19.1953125 18.9524272,19.3320313 L13.9980583,34.4804688 C13.9718447,34.5351562 13.9718447,34.5898437 13.9980583,34.6445313 C14.0242718,34.6992188 14.076699,34.6992188 14.1553398,34.6992188 L16.1213592,34.6992188 C16.2,34.6992188 16.2524272,34.6445313 16.2786408,34.5351562 L17.2747573,31.4179688 C17.3009709,31.3632813 17.3271845,31.3632813 17.3271845,31.3632813 L23.4087379,31.3632813 C23.4873786,31.3632813 23.4873786,31.390625 23.4873786,31.4179688 L24.4572816,34.5625 C24.5097087,34.6992188 24.5621359,34.7265625 24.6145631,34.7265625 L26.5805825,34.7265625 C26.6592233,34.7265625 26.7116505,34.6992188 26.7378641,34.671875 C26.7902913,34.6445313 26.7902913,34.5898438 26.7902913,34.5078125 Z M22.9106796,29.5039063 C22.9106796,29.5039063 22.884466,29.5039063 22.8582524,29.5039063 L17.9300971,29.5039063 C17.9038835,29.5039063 17.8776699,29.5039063 17.8776699,29.5039063 C17.8776699,29.5039063 17.8776699,29.5039063 17.8776699,29.5039063 C17.8776699,29.5039063 17.8776699,29.5039063 17.8776699,29.4765625 L20.3417476,21.4921875 C20.3679612,21.4101562 20.3941748,21.4101562 20.4203883,21.4921875 L22.884466,29.4765625 C22.9106796,29.4765625 22.9106796,29.5039063 22.9106796,29.5039063 Z">
                    </path>
                </g>
            </svg>
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold">
                Conformance Explorer
            </h1>
        </div>
        <!-- Dark Mode Toggle -->
        <div>
            <button 
            (click)="toggleDarkMode()" 
            type="button" 
            class="relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-900 focus:ring-slate-500"
            [class.bg-slate-600]="isDarkMode()" 
            [class.bg-slate-300]="!isDarkMode()"
            role="switch" 
            [attr.aria-checked]="isDarkMode()">
            <span class="sr-only">Toggle dark mode</span>
            <span class="pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                [class.translate-x-5]="isDarkMode()" 
                [class.translate-x-0]="!isDarkMode()">
                <!-- Sun Icon for Light Mode -->
                <span class="absolute inset-0 h-full w-full flex items-center justify-center transition-opacity" [class.opacity-100]="!isDarkMode()" [class.ease-in]="!isDarkMode()" [class.duration-200]="!isDarkMode()" [class.opacity-0]="isDarkMode()" [class.ease-out]="isDarkMode()" [class.duration-100]="isDarkMode()" aria-hidden="true">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-amber-500" viewBox="0 -960 960 960" fill="currentColor">
                    <path d="M440-760v-160h80v160h-80Zm266 110-55-55 112-115 56 57-113 113Zm54 210v-80h160v80H760ZM440-40v-160h80v160h-80ZM254-652 140-763l57-56 113 113-56 54Zm508 512L651-255l54-54 114 110-57 59ZM40-440v-80h160v80H40Zm157 300-56-57 112-112 29 27 29 28-114 114Zm283-100q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-80q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0-160Z"/>
                  </svg>
                </span>
                <!-- Moon Icon for Dark Mode -->
                <span class="absolute inset-0 h-full w-full flex items-center justify-center transition-opacity" [class.opacity-100]="isDarkMode()" [class.ease-in]="isDarkMode()" [class.duration-200]="isDarkMode()" [class.opacity-0]="!isDarkMode()" [class.ease-out]="!isDarkMode()" [class.duration-100]="!isDarkMode()" aria-hidden="true">
                  <svg class="h-3 w-3 text-slate-400" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                  </svg>
                </span>
            </span>
            </button>
        </div>
    </div>
    <p class="text-slate-600 dark:text-slate-400 text-lg">Browse, search, and filter the live versions of the C2PA Conforming Products List, C2PA Trust List, and C2PA TSA Trust List</p>
  </header>

  <!-- Tabs Navigation -->
  <div class="mb-8 border-b border-gray-200 dark:border-slate-700">
    <nav class="-mb-px flex flex-wrap gap-x-8" aria-label="Tabs">
      <button 
        (click)="selectTab('products')"
        [class.border-slate-500]="activeTab() === 'products'"
        [class.text-slate-600]="activeTab() === 'products'"
        [class.dark:border-slate-400]="activeTab() === 'products'"
        [class.dark:text-slate-300]="activeTab() === 'products'"
        [class.border-transparent]="activeTab() !== 'products'"
        [class.text-slate-500]="activeTab() !== 'products'"
        [class.hover:text-slate-700]="activeTab() !== 'products'"
        [class.hover:border-gray-300]="activeTab() !== 'products'"
        [class.dark:text-slate-400]="activeTab() !== 'products'"
        [class.dark:hover:text-slate-200]="activeTab() !== 'products'"
        [class.dark:hover:border-slate-600]="activeTab() !== 'products'"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"
        aria-current="page">
        <span class="sm:hidden">Products</span>
        <span class="hidden sm:inline">Conforming Products List</span>
      </button>

      <button 
        (click)="selectTab('trust')"
        [class.border-slate-500]="activeTab() === 'trust'"
        [class.text-slate-600]="activeTab() === 'trust'"
        [class.dark:border-slate-400]="activeTab() === 'trust'"
        [class.dark:text-slate-300]="activeTab() === 'trust'"
        [class.border-transparent]="activeTab() !== 'trust'"
        [class.text-slate-500]="activeTab() !== 'trust'"
        [class.hover:text-slate-700]="activeTab() !== 'trust'"
        [class.hover:border-gray-300]="activeTab() !== 'trust'"
        [class.dark:text-slate-400]="activeTab() !== 'trust'"
        [class.dark:hover:text-slate-200]="activeTab() !== 'trust'"
        [class.dark:hover:border-slate-600]="activeTab() !== 'trust'"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"
        aria-current="page">
        <span class="sm:hidden">Trust List</span>
        <span class="hidden sm:inline">C2PA Trust List</span>
      </button>

      <button 
        (click)="selectTab('tsaTrust')"
        [class.border-slate-500]="activeTab() === 'tsaTrust'"
        [class.text-slate-600]="activeTab() === 'tsaTrust'"
        [class.dark:border-slate-400]="activeTab() === 'tsaTrust'"
        [class.dark:text-slate-300]="activeTab() === 'tsaTrust'"
        [class.border-transparent]="activeTab() !== 'tsaTrust'"
        [class.text-slate-500]="activeTab() !== 'tsaTrust'"
        [class.hover:text-slate-700]="activeTab() !== 'tsaTrust'"
        [class.hover:border-gray-300]="activeTab() !== 'tsaTrust'"
        [class.dark:text-slate-400]="activeTab() !== 'tsaTrust'"
        [class.dark:hover:text-slate-200]="activeTab() !== 'tsaTrust'"
        [class.dark:hover:border-slate-600]="activeTab() !== 'tsaTrust'"
        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"
        aria-current="page">
        <span class="sm:hidden">TSA Trust List</span>
        <span class="hidden sm:inline">C2PA TSA Trust List</span>
      </button>
    </nav>
  </div>

  <!-- Tab Content -->
  @if (activeTab() === 'products') {
    <app-product-list></app-product-list>
  }
  @if (activeTab() === 'trust') {
    <app-trust-list></app-trust-list>
  }
  @if (activeTab() === 'tsaTrust') {
    <app-tsa-trust-list></app-tsa-trust-list>
  }

</main>
<footer class="mt-12 text-center">
  <div class="flex items-center justify-center gap-2 text-slate-500 dark:text-slate-400">
    <span class="text-sm">Built with</span>
    <a href="https://ai.studio" target="_blank" rel="noopener noreferrer" class="transition-colors hover:text-slate-800 dark:hover:text-slate-200">
      <svg aria-label="Google AI Studio logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 323 47" fill="currentColor" class="h-5 w-auto">
        <g clip-path="url(#clip0_1_2)">
          <path d="M159.726 35.6814H155.143L167.281 3.49382H171.957L184.095 35.6814H179.512L176.409 26.959H162.878L159.731 35.6814H159.726ZM169.524 8.57582L164.266 23.0986H174.967L169.709 8.57582H169.529H169.524Z"/>
          <path d="M190.941 35.6814H186.807V3.49382H190.941V35.6814Z"/>
          <path d="M227.175 27.0763C227.175 29.9007 226.139 32.168 224.072 33.8783C221.976 35.5593 219.425 36.3998 216.43 36.3998C213.762 36.3998 211.411 35.6228 209.373 34.064C207.336 32.5052 205.928 30.3796 205.147 27.6822L209.105 26.0647C209.373 27.0225 209.75 27.8923 210.229 28.6742C210.707 29.4511 211.269 30.1206 211.914 30.6728C212.559 31.2298 213.268 31.6598 214.05 31.9775C214.827 32.2902 215.653 32.4515 216.522 32.4515C218.409 32.4515 219.953 31.9628 221.155 30.9904C222.352 30.018 222.953 28.7181 222.953 27.1007C222.953 25.752 222.46 24.5988 221.468 23.641C220.539 22.7126 218.8 21.8135 216.254 20.9437C213.674 20.0152 212.071 19.3849 211.445 19.0575C208.03 17.3179 206.319 14.7573 206.319 11.3709C206.319 9.00585 207.262 6.98283 209.154 5.30186C211.069 3.62578 213.424 2.78529 216.21 2.78529C218.668 2.78529 220.793 3.41566 222.592 4.6715C224.39 5.9029 225.587 7.44216 226.188 9.30393L222.323 10.9214C221.961 9.72417 221.253 8.72732 220.187 7.93082C219.122 7.1392 217.827 6.7385 216.298 6.7385C214.68 6.7385 213.317 7.18806 212.208 8.0823C211.098 8.9179 210.546 10.0076 210.546 11.3514C210.546 12.4557 210.981 13.4086 211.851 14.2149C212.809 15.0212 214.89 15.9741 218.101 17.0784C221.365 18.1925 223.696 19.551 225.093 21.1587C226.486 22.7663 227.185 24.7405 227.185 27.0811L227.175 27.0763Z"/>
          <path d="M238.062 36.043C236.264 36.043 234.774 35.4909 233.591 34.3816C232.409 33.2724 231.798 31.7282 231.768 29.7492V17.4302H227.903V13.6529H231.768V6.90952H235.902V13.6529H241.297V17.4302H235.902V28.4005C235.902 29.8713 236.186 30.8682 236.758 31.3911C237.324 31.9139 237.969 32.1778 238.693 32.1778C239.02 32.1778 239.343 32.1387 239.66 32.0654C239.973 31.9921 240.266 31.8944 240.535 31.7722L241.84 35.4567C240.76 35.8476 239.504 36.043 238.062 36.043Z"/>
          <path d="M263.213 35.6814H259.255V32.6225H259.074C258.444 33.7024 257.476 34.6015 256.177 35.3198C254.872 36.0382 253.518 36.3998 252.106 36.3998C249.409 36.3998 247.332 35.6277 245.881 34.0835C244.424 32.5394 243.701 30.3454 243.701 27.4965V13.6481H247.835V27.2229C247.923 30.8193 249.736 32.6176 253.274 32.6176C254.921 32.6176 256.299 31.953 257.408 30.619C258.517 29.285 259.069 27.692 259.069 25.8302V13.6481H263.203V35.6766L263.213 35.6814Z"/>
          <path d="M276.651 36.3997C273.773 36.3997 271.3 35.2612 269.233 32.9841C267.196 30.6776 266.174 27.9021 266.174 24.6672C266.174 21.4323 267.191 18.6567 269.233 16.3503C271.3 14.0732 273.773 12.9346 276.651 12.9346C278.269 12.9346 279.744 13.2816 281.078 13.9706C282.412 14.6596 283.439 15.5733 284.157 16.7119H284.338L284.157 13.6529V3.49382H288.291V35.6814H284.333V32.6225H284.152C283.434 33.761 282.408 34.6748 281.074 35.3638C279.74 36.0528 278.264 36.3997 276.646 36.3997H276.651ZM277.326 32.6273C279.363 32.6273 281.025 31.8944 282.315 30.4235C283.663 28.9576 284.338 27.0371 284.338 24.6672C284.338 22.2972 283.663 20.455 282.315 18.9597C280.995 17.4595 279.334 16.7119 277.326 16.7119C275.317 16.7119 273.685 17.4595 272.336 18.9597C270.988 20.4599 270.313 22.3607 270.313 24.6672C270.313 26.9736 270.988 28.9087 272.336 30.3747C273.685 31.8748 275.347 32.6225 277.326 32.6225V32.6273Z"/>
          <path d="M297.658 6.05437C297.658 6.86553 297.375 7.55453 296.803 8.12137C296.232 8.6931 295.543 8.97651 294.736 8.97651C293.93 8.97651 293.236 8.6931 292.669 8.12137C292.098 7.55453 291.814 6.86064 291.814 6.05437C291.814 5.24809 292.098 4.5542 292.669 3.98736C293.241 3.42052 293.93 3.13222 294.736 3.13222C295.543 3.13222 296.236 3.41564 296.803 3.98736C297.375 4.55909 297.658 5.24809 297.658 6.05437ZM296.803 13.6529V35.6814H292.669V13.6529H296.803Z"/>
          <path d="M299.833 24.6672C299.833 21.2808 300.898 18.4809 303.024 16.2624C305.184 14.0439 307.896 12.9346 311.16 12.9346C314.424 12.9346 317.126 14.0439 319.252 16.2624C321.412 18.4809 322.487 21.2808 322.487 24.6672C322.487 28.0536 321.407 30.8878 319.252 33.0721C317.122 35.2905 314.424 36.3998 311.16 36.3998C307.896 36.3998 305.179 35.2905 303.024 33.0721C300.893 30.8536 299.833 28.0536 299.833 24.6672ZM303.967 24.6672C303.967 27.0372 304.656 28.9527 306.034 30.4236C307.412 31.8944 309.122 32.6274 311.16 32.6274C313.198 32.6274 314.908 31.8944 316.286 30.4236C317.664 28.9576 318.353 27.0372 318.353 24.6672C318.353 22.2972 317.664 20.4257 316.286 18.9597C314.879 17.4596 313.168 16.7119 311.16 16.7119C309.152 16.7119 307.441 17.4596 306.034 18.9597C304.656 20.4306 303.967 22.3315 303.967 24.6672Z"/>
          <path d="M18.4516 36.3949C8.42439 36.3949 0 28.2246 0 18.1975C0 8.17029 8.42439 0 18.4516 0C23.9978 0 27.9412 2.17451 30.9122 5.01359L27.4086 8.51723C25.2781 6.51864 22.395 4.96472 18.4516 4.96472C11.1364 4.96472 5.41428 10.8677 5.41428 18.1926C5.41428 25.5175 11.1364 31.4155 18.4516 31.4155C23.1964 31.4155 25.9035 29.5098 27.6334 27.7751C29.0505 26.3531 29.9838 24.3154 30.3405 21.5154H18.3245V16.5458H35.1733C35.3492 17.4352 35.4372 18.5004 35.4372 19.6536C35.4372 23.3821 34.4159 27.9998 31.137 31.2836C27.9461 34.6113 23.8658 36.3851 18.4516 36.3851V36.3949Z"/>
          <path d="M60.6712 24.677C60.6712 31.4254 55.3986 36.395 48.9337 36.395C42.4689 36.395 37.1963 31.4254 37.1963 24.677C37.1963 17.9287 42.4689 12.9591 48.9337 12.9591C55.3986 12.9591 60.6712 17.8848 60.6712 24.677ZM55.5306 24.677C55.5306 20.46 52.4716 17.5769 48.9289 17.5769C45.3861 17.5769 42.3272 20.46 42.3272 24.677C42.3272 28.8941 45.3861 31.7772 48.9289 31.7772C52.4716 31.7772 55.5306 28.8502 55.5306 24.677Z"/>
          <path d="M86.2229 24.677C86.2229 31.4254 80.9503 36.395 74.4854 36.395C68.0206 36.395 62.748 31.4254 62.748 24.677C62.748 17.9287 68.0206 12.9591 74.4854 12.9591C80.9503 12.9591 86.2229 17.8848 86.2229 24.677ZM81.0823 24.677C81.0823 20.46 78.0233 17.5769 74.4806 17.5769C70.9378 17.5769 67.8788 20.46 67.8788 24.677C67.8788 28.8941 70.9378 31.7772 74.4806 31.7772C78.0233 31.7772 81.0823 28.8502 81.0823 24.677Z"/>
          <path d="M110.665 13.6677V34.7042C110.665 43.3583 105.564 46.9108 99.5338 46.9108C93.8557 46.9108 90.44 43.0944 89.1548 39.9866L93.6358 38.1248C94.4323 40.0354 96.3869 42.2979 99.5338 42.2979C103.394 42.2979 105.789 39.9035 105.789 35.4177V33.7318H105.613C104.459 35.1538 102.241 36.395 99.4459 36.395C93.5918 36.395 88.2264 31.2934 88.2264 24.721C88.2264 18.1486 93.5918 12.9591 99.4459 12.9591C102.241 12.9591 104.459 14.2003 105.613 15.5783H105.789V13.6677H110.665ZM106.14 24.721C106.14 20.5919 103.389 17.5769 99.8857 17.5769C96.382 17.5769 93.367 20.5968 93.367 24.721C93.367 28.8453 96.338 31.7772 99.8857 31.7772C103.433 31.7772 106.14 28.8013 106.14 24.721Z"/>
          <path d="M119.51 1.24123V35.6815H114.365V1.24123H119.51Z"/>
          <path d="M139.452 28.5374L143.444 31.2006C142.159 33.1112 139.051 36.395 133.686 36.395C127.035 36.395 122.066 31.2446 122.066 24.677C122.066 17.7088 127.079 12.9591 133.109 12.9591C139.139 12.9591 142.154 17.7968 143.132 20.416L143.664 21.7451L128.008 28.2247C129.205 30.5751 131.067 31.7772 133.686 31.7772C136.305 31.7772 138.123 30.492 139.452 28.5374ZM127.167 24.3203L137.634 19.9713C137.058 18.5054 135.328 17.4841 133.29 17.4841C130.676 17.4841 127.035 19.7905 127.172 24.3203H127.167Z"/>
        </g>
        <defs>
          <clipPath id="clip0_1_2">
            <rect width="323" height="47" fill="white"/>
          </clipPath>
        </defs>
      </svg>
    </a>
  </div>
</footer>`,
  changeDetection: ChangeDetectionStrategy.OnPush,
  imports: [ProductListComponent, TrustListComponent, TsaTrustListComponent, CommonModule],
})
export class AppComponent {
  activeTab = signal<'products' | 'trust' | 'tsaTrust'>('products');

  private readonly platformId = inject(PLATFORM_ID);
  private readonly document = inject(DOCUMENT);
  
  // Initialize dark mode based on user's system preference
  isDarkMode = signal<boolean>(this.getInitialDarkMode());

  constructor() {
    effect(() => {
      if (isPlatformBrowser(this.platformId)) {
        const root = this.document.documentElement;
        if (this.isDarkMode()) {
          root.classList.add('dark');
        } else {
          root.classList.remove('dark');
        }
      }
    });
  }

  private getInitialDarkMode(): boolean {
    if (isPlatformBrowser(this.platformId)) {
      return window.matchMedia?.('(prefers-color-scheme: dark)').matches ?? false;
    }
    return false;
  }

  selectTab(tab: 'products' | 'trust' | 'tsaTrust'): void {
    this.activeTab.set(tab);
  }

  toggleDarkMode(): void {
    this.isDarkMode.update(value => !value);
  }
}